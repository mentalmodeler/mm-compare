(this["webpackJsonpmm-compare"]=this["webpackJsonpmm-compare"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),s=n(9),o=n.n(s),i=(n(17),n(10)),l=n(3),d=n(11),u=n(6),m=n.n(u),j=n(2),p=n.n(j),f=n(4);n(19);function h(e){var t=new FileReader;return new Promise((function(n,c){t.onerror=function(){t.abort(),c(new DOMException("MMP file loading failed!"))},t.onload=function(){n(t.result)},t.readAsText(e)}))}function b(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.responseType="text",new Promise((function(e,n){t.onerror=function(){t.abort(),n(new DOMException("MMP url loading failed!"))},t.onload=function(){e(t.result)},t.send()}))}var O=["relationships","concepts","properties"];function x(e){try{return e.indexOf("<?xml")>-1?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return(new DOMParser).parseFromString(e,"application/xml").firstChild.childNodes.forEach((function(e){switch(e.localName){case"info":-1===t.indexOf("info")&&(n.info=v(e));break;case"groupNames":-1===t.indexOf("group")&&(n.groupNames=v(e,!0));break;case"concepts":-1===t.indexOf("concepts")&&(n.concepts=N(y(e)));break;case"scenarios":-1===t.indexOf("scenario")&&(n.scenarios=N(y(e)))}})),n}(e):JSON.parse(e)}catch(t){console.error(t),alert("Parsing of mmp failed!")}}function v(e,t){var n={};return e.childNodes.forEach((function(e){if(1===e.nodeType){if("groupName"===e.localName){var c=e.getAttribute("index");n[c]=e.textContent}O.indexOf(e.localName)>-1?n[e.localName]=N(y(e)):t||(n[e.localName]=e.textContent)}})),n}function N(e){var t=[];return e.forEach((function(e){t.push(v(e))})),t}function y(e){var t=[];return e.childNodes.forEach((function(e){1===e.nodeType&&t.push(e)})),t}function _(e){return w.apply(this,arguments)}function w(){return(w=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,h(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return S.apply(this,arguments)}function S(){return(S=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,b(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(""),n=Object(a.useContext)(J).dispatch,r=function(){var e=Object(f.a)(p.a.mark((function e(){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t.current.value);case 2:c=e.sent,n({action:{type:"addJSON",json:c}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"controls",children:[Object(c.jsxs)("div",{className:"controls__load-local",children:[Object(c.jsx)("input",{type:"button",onClick:function(){return e.current.click()},value:"Load from Local",className:"btn btn-ghost"}),Object(c.jsx)("input",{type:"file",multiple:!0,ref:e,style:{display:"none"},onChange:function(e){var t=e.target.files;t&&t.length>0&&Array.from(t).forEach(function(){var e=Object(f.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:c=e.sent,n({action:{type:"addJSON",json:c}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},value:""})]}),Object(c.jsxs)("div",{className:"controls__load-url",children:[Object(c.jsx)("input",{type:"text",ref:t,className:"input",placeholder:"Enter URL here"}),Object(c.jsx)("input",{type:"button",onClick:r,value:"Load from URL",className:"btn btn-ghost"})]})]})};n(20);var M=function(){var e=Object(a.useContext)(J),t=e.state,n=e.setState,r=e.dispatch,s=t.modelsJSON,o=t.canonical;return Object(c.jsx)("div",{className:"models",children:s.map((function(e,t){var a=e||{info:{}},s=a.info,i=a.id,l=s.author,d=s.date,u=s.name;return Object(c.jsx)("div",{className:"model-wrapper",children:Object(c.jsxs)("div",{className:"model",children:[Object(c.jsxs)("div",{className:"model__info",children:[Object(c.jsx)("div",{className:"model__author",children:l||"[Author]"}),Object(c.jsx)("div",{className:"model__name",children:u||"[Name]"}),Object(c.jsx)("div",{className:"model__date",children:d?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(new Date(d)):"[Date]"})]}),Object(c.jsxs)("div",{className:"model__controls",children:[Object(c.jsx)("button",{className:m()("canonical-btn",{"canonical-btn--selected":i===o}),onClick:function(){return n({canonical:i})},children:Object(c.jsx)("span",{children:"Canonical"})}),Object(c.jsx)("button",{className:"delete-btn",onClick:function(){return r({action:{type:"removeModel",id:i}})},children:"Remove"})]})]})},"model-".concat(t))}))})};n(21);var k=function(e){return e.results,Object(c.jsx)("div",{className:"results",children:Object(c.jsx)("h1",{children:"Results"})})},J=(n(22),r.a.createContext({modelsJSON:[],results:{},canonical:null}));var E=function(){var e=Object(a.useReducer)((function(e,t){var n=Object(l.a)(Object(l.a)({},e),t),c=t.action;return c&&c.type&&("addJSON"===c.type?n=Object(l.a)(Object(l.a)({},n),{},{modelsJSON:[].concat(Object(i.a)(n.modelsJSON),[Object(l.a)(Object(l.a)({},c.json),!c.json.id&&{id:"id-".concat(Math.random().toString(16).slice(2))})])}):"removeModel"===c.type&&(n=Object(l.a)(Object(l.a)({},n),{},{modelsJSON:n.modelsJSON.filter((function(e){return e.id!==c.id}))},n.canonical===c.id&&{canonical:null}))),n}),{modelsJSON:[],results:{},canonical:null,mode:"files"}),t=Object(d.a)(e,2),n=t[0],r=t[1],s=(n.modelsJSON,n.mode),o=n.results;return Object(c.jsx)(J.Provider,{value:{state:n,setState:r,dispatch:r},children:Object(c.jsxs)("div",{className:"MMCompare",children:[Object(c.jsxs)("header",{className:"header",children:[Object(c.jsxs)("div",{className:"header__primary",children:[Object(c.jsxs)("div",{className:"logo",children:[Object(c.jsx)("span",{children:"MentalModeler"}),Object(c.jsx)("span",{children:"COMPARE"})]}),Object(c.jsxs)("div",{className:"header__mode-select",children:[Object(c.jsx)("div",{className:m()("header__mode-select-mode",{"header__mode-select-mode--selected":"files"===s}),onClick:function(){return r({mode:"files"})},children:Object(c.jsx)("span",{children:"Files"})}),Object(c.jsx)("div",{className:m()("header__mode-select-mode",{"header__mode-select-mode--selected":"compare"===s}),onClick:function(){return r({mode:"compare"})},children:Object(c.jsx)("span",{children:"Compare"})})]})]}),Object(c.jsxs)("div",{className:"header__secondary",children:["files"===s&&Object(c.jsx)(C,{}),"compare"===s&&Object(c.jsx)("input",{type:"button",value:"Run comparision",className:"btn btn-ghost"})]})]}),Object(c.jsxs)("main",{className:"main",children:["files"===s&&Object(c.jsx)(M,{}),"compare"===s&&Object(c.jsx)(k,{results:o})]})]})})};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(E,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.35f87cf8.chunk.js.map