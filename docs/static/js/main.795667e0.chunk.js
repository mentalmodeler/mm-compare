(this["webpackJsonpmm-compare"]=this["webpackJsonpmm-compare"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),s=n(8),o=n.n(s),i=(n(16),n(9)),l=n(3),u=n(10),d=(n(17),n(2)),p=n.n(d),f=n(4);n(19);function j(e){var t=new FileReader;return new Promise((function(n,r){t.onerror=function(){t.abort(),r(new DOMException("MMP file loading failed!"))},t.onload=function(){n(t.result)},t.readAsText(e)}))}function m(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.responseType="text",new Promise((function(e,n){t.onerror=function(){t.abort(),n(new DOMException("MMP url loading failed!"))},t.onload=function(){e(t.result)},t.send()}))}var O=["relationships","concepts","properties"];function h(e){try{return e.indexOf("<?xml")>-1?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return(new DOMParser).parseFromString(e,"application/xml").firstChild.childNodes.forEach((function(e){switch(e.localName){case"info":-1===t.indexOf("info")&&(n.info=b(e));break;case"groupNames":-1===t.indexOf("group")&&(n.groupNames=b(e,!0));break;case"concepts":-1===t.indexOf("concepts")&&(n.concepts=x(v(e)));break;case"scenarios":-1===t.indexOf("scenario")&&(n.scenarios=x(v(e)))}})),n}(e):JSON.parse(e)}catch(t){console.error(t),alert("Parsing of mmp failed!")}}function b(e,t){var n={};return e.childNodes.forEach((function(e){if(1===e.nodeType){if("groupName"===e.localName){var r=e.getAttribute("index");n[r]=e.textContent}O.indexOf(e.localName)>-1?n[e.localName]=x(v(e)):t||(n[e.localName]=e.textContent)}})),n}function x(e){var t=[];return e.forEach((function(e){t.push(b(e))})),t}function v(e){var t=[];return e.childNodes.forEach((function(e){1===e.nodeType&&t.push(e)})),t}function N(e){return y.apply(this,arguments)}function y(){return(y=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,j(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return(w=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,m(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(""),n=Object(c.useContext)(S).dispatch,a=function(){var e=Object(f.a)(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t.current.value);case 2:r=e.sent,n({action:{type:"addJSON",json:r}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"controls",children:Object(r.jsxs)("div",{className:"controls__load",children:[Object(r.jsxs)("span",{className:"controls__load-local",children:[Object(r.jsx)("input",{type:"button",onClick:function(){return e.current.click()},value:"Load from Local",className:"btn btn-ghost"}),Object(r.jsx)("input",{type:"file",multiple:!0,ref:e,style:{display:"none"},onChange:function(e){var t=e.target.files;t&&t.length>0&&Array.from(t).forEach(function(){var e=Object(f.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:r=e.sent,n({action:{type:"addJSON",json:r}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},value:""})]}),Object(r.jsxs)("span",{className:"controls__load-url",children:[Object(r.jsx)("input",{type:"text",ref:t,className:"input",placeholder:"Enter URL here"}),Object(r.jsx)("input",{type:"button",onClick:a,value:"Load from URL",className:"btn btn-ghost"})]})]})})};n(20);n(21);var _=function(e){return e.results,Object(r.jsx)("div",{className:"results",children:Object(r.jsx)("h1",{children:"Results"})})},S=a.a.createContext({modelsJSON:[],results:{},canonical:null});var J=function(){var e=Object(c.useReducer)((function(e,t){var n=Object(l.a)(Object(l.a)({},e),t),r=t.action;return r&&r.type&&("addJSON"===r.type?n=Object(l.a)(Object(l.a)({},n),{},{modelsJSON:[].concat(Object(i.a)(n.modelsJSON),[Object(l.a)(Object(l.a)({},r.json),!r.json.id&&{id:"id-".concat(Math.random().toString(16).slice(2))})])}):"removeModel"===r.type&&(n=Object(l.a)(Object(l.a)({},n),{},{modelsJSON:n.modelsJSON.filter((function(e){return e.id!==r.id}))}))),n}),{modelsJSON:[],results:{},canonical:null,mode:"load"}),t=Object(u.a)(e,2),n=t[0],a=t[1];console.log("state:",n),n.modelsJSON;var s=n.mode,o=n.results;return Object(r.jsx)(S.Provider,{value:{state:n,setState:a,dispatch:a},children:Object(r.jsxs)("div",{className:"MMCompare",children:[Object(r.jsxs)("header",{className:"header",children:[Object(r.jsxs)("div",{className:"header__primary",children:[Object(r.jsxs)("div",{className:"logo",children:[Object(r.jsx)("span",{children:"MentalModeler"}),Object(r.jsx)("span",{children:"COMPARE"})]}),Object(r.jsxs)("div",{className:"header__mode-select",children:[Object(r.jsx)("div",{className:"header__mode-select-mode",children:Object(r.jsx)("span",{children:"Files"})}),Object(r.jsx)("div",{className:"header__mode-select-mode",children:Object(r.jsx)("span",{children:"Compare"})})]})]}),Object(r.jsxs)("div",{className:"header__secondary",children:["load"===s&&Object(r.jsx)(M,{}),"compare"===s&&null]})]}),"result"===s&&Object(r.jsx)(_,{results:o})]})})};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(J,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.795667e0.chunk.js.map