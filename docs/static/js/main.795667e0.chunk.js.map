{"version":3,"sources":["../../mm-modules/src/loader.js","../../mm-modules/src/parser.js","../../mm-modules/index.js","components/Controls/Controls.js","components/Results/Results.js","components/App/App.js","index.js"],"names":["loadFile","file","reader","FileReader","Promise","resolve","reject","onerror","abort","DOMException","onload","result","readAsText","loadURL","url","req","XMLHttpRequest","open","responseType","send","NESTED_LISTS","parseMMP","mmp","indexOf","xmlString","excludeArray","json","DOMParser","parseFromString","firstChild","childNodes","forEach","node","localName","info","getJSONFromNode","groupNames","concepts","getJSONFromArray","getChildNodes","scenarios","parseXML","JSON","parse","e","console","error","alert","xmlNode","omitLocalNameProperty","nodeType","idx","getAttribute","textContent","xmlArray","a","push","xml","nodes","loadAndParse","loadAndParseURL","Controls","inputFile","useRef","inputURL","dispatch","useContext","AppContext","handleLoadURL","current","value","action","type","className","onClick","click","multiple","ref","style","display","onChange","evt","fileList","target","files","length","Array","from","f","placeholder","Results","results","React","createContext","modelsJSON","canonical","App","useReducer","oldState","newState","updatedState","id","Math","random","toString","slice","filter","model","mode","state","setState","log","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4UAAA,SAASA,EAASC,GACd,IAAMC,EAAS,IAAIC,WAEnB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GACzBJ,EAAOK,QAAU,WACbL,EAAOM,QACPF,EAAO,IAAIG,aAAa,8BAG5BP,EAAOQ,OAAS,WACZL,EAAQH,EAAOS,SAGnBT,EAAOU,WAAWX,MAI1B,SAASY,EAAQC,GACb,IAAMC,EAAM,IAAIC,eAKhB,OAHAD,EAAIE,KAAK,MAAOH,GAAK,GACrBC,EAAIG,aAAe,OAEZ,IAAId,SAAQ,SAACC,EAASC,GACzBS,EAAIR,QAAU,WACVQ,EAAIP,QACJF,EAAO,IAAKG,aAAa,6BAG7BM,EAAIL,OAAS,WACTL,EAAQU,EAAIJ,SAGhBI,EAAII,UCjCZ,IAAMC,EAAe,CAAC,gBAAiB,WAAY,cAEnD,SAASC,EAASC,GACd,IACI,OAAIA,EAAIC,QAAQ,UAAY,EAapC,SAAkBC,GAA8B,IAAnBC,EAAmB,uDAAJ,GACpCC,EAAO,GA8BX,OA7Ba,IAAIC,WACGC,gBAAgBJ,EAAW,mBACvBK,WAAWC,WAExBC,SAAQ,SAACC,GAChB,OAAOA,EAAKC,WACR,IAAK,QACqC,IAAlCR,EAAaF,QAAQ,UACrBG,EAAKQ,KAAOC,EAAgBH,IAEpC,MACA,IAAK,cACsC,IAAnCP,EAAaF,QAAQ,WACrBG,EAAKU,WAAaD,EAAgBH,GAAM,IAEhD,MACA,IAAK,YACyC,IAAtCP,EAAaF,QAAQ,cACrBG,EAAKW,SAAWC,EAAiBC,EAAcP,KAEvD,MACA,IAAK,aACyC,IAAtCP,EAAaF,QAAQ,cACrBG,EAAKc,UAAYF,EAAiBC,EAAcP,SAMzDN,EA3CQe,CAASnB,GAGToB,KAAKC,MAAMrB,GAG1B,MAAOsB,GACHC,QAAQC,MAAMF,GACdG,MAAM,2BAsCd,SAASZ,EAAgBa,EAASC,GAC9B,IAAIvB,EAAO,GAiBX,OAfAsB,EAAQlB,WAAWC,SAAQ,SAACC,GACxB,GAAsB,IAAlBA,EAAKkB,SAAgB,CACrB,GAAuB,cAAnBlB,EAAKC,UAA2B,CAChC,IAAIkB,EAAMnB,EAAKoB,aAAa,SAC5B1B,EAAKyB,GAAOnB,EAAKqB,YAGjBjC,EAAaG,QAAQS,EAAKC,YAAc,EACxCP,EAAKM,EAAKC,WAAaK,EAAiBC,EAAcP,IAEhDiB,IACNvB,EAAKM,EAAKC,WAAaD,EAAKqB,iBAIjC3B,EAGX,SAASY,EAAiBgB,GACtB,IAAIC,EAAI,GAMR,OAJAD,EAASvB,SAAQ,SAACC,GACduB,EAAEC,KAAKrB,EAAgBH,OAGpBuB,EAGX,SAAShB,EAAckB,GACnB,IAAIC,EAAQ,GAQZ,OANAD,EAAI3B,WAAWC,SAAQ,SAACC,GACC,IAAlBA,EAAKkB,UACJQ,EAAMF,KAAKxB,MAIZ0B,E,SCxFIC,E,8EAAf,WAA4B1D,GAA5B,SAAAsD,EAAA,kEACWlC,EADX,SAC0BrB,EAASC,GADnC,wG,+BAIe2D,E,8EAAf,WAA+B9C,GAA/B,SAAAyC,EAAA,kEACWlC,EADX,SAC0BR,EAAQC,GADlC,wG,sBC+Ee+C,MA9Ef,WACI,IAAMC,EAAYC,iBAAO,MACnBC,EAAWD,iBAAO,IACjBE,EAAYC,qBAAWC,GAAvBF,SAGDG,EAAa,uCAAG,4BAAAb,EAAA,sEACCK,EAAgBI,EAASK,QAAQC,OADlC,OACZ5C,EADY,OAElBuC,EAAS,CACLM,OAAQ,CACJC,KAAM,UACN9C,UALU,2CAAH,qDA4BnB,OACI,qBAAK+C,UAAU,WAAf,SACI,sBAAKA,UAAU,iBAAf,UACI,uBAAMA,UAAU,uBAAhB,UACI,uBACID,KAAK,SACLE,QApCI,kBAAMZ,EAAUO,QAAQM,SAqC5BL,MAAM,kBACNG,UAAU,kBAEd,uBACID,KAAK,OACLI,UAAU,EACVC,IAAKf,EACLgB,MAAO,CAACC,QAAQ,QAChBC,SAjCY,SAAAC,GAC5B,IAAMC,EAAWD,EAAIE,OAAOC,MACxBF,GAAYA,EAASG,OAAS,GAChBC,MAAMC,KAAKL,GACnBnD,QAAN,uCAAc,WAAMyD,GAAN,eAAAjC,EAAA,sEACSI,EAAa6B,GADtB,OACJ9D,EADI,OAEVuC,EAAS,CACLM,OAAQ,CACJC,KAAM,UACN9C,UALE,2CAAd,wDA8BY4C,MAAM,QAGd,uBAAMG,UAAU,qBAAhB,UACI,uBACID,KAAK,OACLK,IAAKb,EACLS,UAAU,QACVgB,YAAY,mBAEhB,uBACIjB,KAAK,SACLE,QAASN,EACTE,MAAM,gBACNG,UAAU,2B,YC9DnBiB,MARf,YACI,OADwB,EAAVC,QAEV,qBAAKlB,UAAU,UAAf,SACI,4CCCCN,EAAayB,IAAMC,cAAc,CAC1CC,WAAY,GACZH,QAAS,GACTI,UAAW,OAqEAC,MAhEf,WAAgB,IAAD,EACeC,sBAAW,SAACC,EAAUC,GAC5C,IAAIC,EAAY,2BAAOF,GAAaC,GAC7B5B,EAAU4B,EAAV5B,OAqBP,OApBIA,GAAUA,EAAOC,OAEG,YAAhBD,EAAOC,KACP4B,EAAY,2BACLA,GADK,IAERN,WAAW,GAAD,mBACHM,EAAaN,YADV,4BAGCvB,EAAO7C,OACL6C,EAAO7C,KAAK2E,IAAM,CAACA,GAfrC,aAAYC,KAAKC,SAASC,SAAS,IAAIC,MAAM,UAmBrB,gBAAhBlC,EAAOC,OACd4B,EAAY,2BACLA,GADK,IAERN,WAAYM,EAAaN,WAAWY,QAAO,SAACC,GAAD,OAAWA,EAAMN,KAAO9B,EAAO8B,UAI/ED,IACR,CACCN,WAAY,GACZH,QAAS,GACTI,UAAW,KACXa,KAAM,SA7BC,mBACJC,EADI,KACGC,EADH,KA+BXjE,QAAQkE,IAAI,SAAUF,GACcA,EAA7Bf,WAhCI,IAgCQc,EAAiBC,EAAjBD,KAAMjB,EAAWkB,EAAXlB,QACzB,OACI,cAACxB,EAAW6C,SAAZ,CAAqB1C,MAAO,CAACuC,QAAOC,WAAU7C,SAAU6C,GAAxD,SACI,sBAAKrC,UAAU,YAAf,UACA,yBAAQA,UAAU,SAAlB,UACI,sBAAKA,UAAU,kBAAf,UACI,sBAAKA,UAAW,OAAhB,UACI,+BAAO,kBACP,+BAAO,eAEX,sBAAKA,UAAU,sBAAf,UACI,qBAAKA,UAAU,2BAAf,SACI,+BAAO,YAEX,qBAAKA,UAAU,2BAAf,SACI,+BAAO,oBAInB,sBAAKA,UAAU,oBAAf,UACc,SAATmC,GAAoB,cAAC,EAAD,IACX,YAATA,GAAuB,WAGlB,WAATA,GACG,cAAC,EAAD,CAASjB,QAASA,UClEtCsB,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,MAEJC,SAASC,eAAe,W","file":"static/js/main.795667e0.chunk.js","sourcesContent":["function loadFile(file) {\n    const reader = new FileReader();\n\n    return new Promise((resolve, reject) => {\n        reader.onerror = () => {\n            reader.abort();\n            reject(new DOMException('MMP file loading failed!'));\n        };\n\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n\n        reader.readAsText(file);\n    });\n}\n\nfunction loadURL(url) {\n    const req = new XMLHttpRequest();\n\n    req.open('GET', url, true);\n    req.responseType = 'text';\n    \n    return new Promise((resolve, reject) => {\n        req.onerror = () => {\n            req.abort();\n            reject(new  DOMException('MMP url loading failed!'));\n        };\n\n        req.onload = () => {\n            resolve(req.result);\n        };\n\n        req.send();\n    });\n}\n\nexport {loadFile, loadURL};\n","const NESTED_LISTS = ['relationships', 'concepts', 'properties'];\n\nfunction parseMMP(mmp) {\n    try {\n        if (mmp.indexOf('<?xml') > -1) {\n            return parseXML(mmp);\n        }\n        else {\n            return JSON.parse(mmp);\n        }\n    }\n    catch (e) {\n        console.error(e);\n        alert('Parsing of mmp failed!');\n    }\n}\n\nfunction parseXML(xmlString, excludeArray = []) {\n    let json = {};\n    let parser = new DOMParser();\n    let xmlDoc = parser.parseFromString(xmlString, 'application/xml');\n    let childNodes = xmlDoc.firstChild.childNodes;\n\n    childNodes.forEach((node) => {\n        switch(node.localName) {\n            case 'info':\n                if (excludeArray.indexOf('info') === -1) {\n                    json.info = getJSONFromNode(node);\n                }\n            break;\n            case 'groupNames':\n                if (excludeArray.indexOf('group') === -1) {\n                    json.groupNames = getJSONFromNode(node, true);\n                }\n            break;\n            case 'concepts':\n                if (excludeArray.indexOf('concepts') === -1) {\n                    json.concepts = getJSONFromArray(getChildNodes(node));\n                }\n            break;\n            case 'scenarios':\n                if (excludeArray.indexOf('scenario') === -1) {\n                    json.scenarios = getJSONFromArray(getChildNodes(node));\n                }\n            break;\n        }\n    });\n\n    return json;\n}\n\nfunction getJSONFromNode(xmlNode, omitLocalNameProperty) {\n    let json = {};\n\n    xmlNode.childNodes.forEach((node) => {\n        if (node.nodeType === 1) {\n            if (node.localName === 'groupName') {\n                let idx = node.getAttribute('index');\n                json[idx] = node.textContent;\n            }\n            \n            if (NESTED_LISTS.indexOf(node.localName) > -1) {\n                json[node.localName] = getJSONFromArray(getChildNodes(node));\n            }\n            else if (!omitLocalNameProperty) {\n                json[node.localName] = node.textContent;\n            }\n        }\n    });\n    return json;\n}\n\nfunction getJSONFromArray(xmlArray) {\n    let a = [];\n\n    xmlArray.forEach((node) => {\n        a.push(getJSONFromNode(node));\n    });\n\n    return a;\n}\n\nfunction getChildNodes(xml) {\n    let nodes = [];\n\n    xml.childNodes.forEach((node) => {\n        if(node.nodeType === 1) {\n            nodes.push(node);\n        }\n    });\n\n    return nodes;\n}\n\nexport {parseMMP};\n","import {loadFile, loadURL} from './src/loader';\nimport {parseMMP} from './src/parser';\n\nasync function loadAndParse(file) {\n    return parseMMP(await loadFile(file));\n}\n\nasync function loadAndParseURL(url) {\n    return parseMMP(await loadURL(url));\n}\n\nexport {loadFile, loadURL, loadAndParse, loadAndParseURL, parseMMP};\n","import './Controls.css';\nimport {useContext, useRef} from 'react';\nimport {loadAndParse, loadAndParseURL} from 'mm-modules';\n\nimport {AppContext} from '../App/App';\n\n\n\nfunction Controls() { // {modelsJSON, setModelsJSON}) {\n    const inputFile = useRef(null);\n    const inputURL = useRef('');\n    const {dispatch} = useContext(AppContext);\n    const handleLoadLocal = () => inputFile.current.click();\n\n    const handleLoadURL = async () => {\n        const json = await loadAndParseURL(inputURL.current.value);\n        dispatch({\n            action: {\n                type: 'addJSON',\n                json\n            }\n        });\n    };\n\n    const loadAndParseLocalModels = evt => {\n        const fileList = evt.target.files;\n        if (fileList && fileList.length > 0) {\n            const files = Array.from(fileList);\n            files.forEach(async f => {\n                const json = await loadAndParse(f);\n                dispatch({\n                    action: {\n                        type: 'addJSON',\n                        json\n                    }\n                });\n            });\n        }\n    };\n\n    const handleCompare = () => console.log(\"compare models...\");\n    \n    return (\n        <div className=\"controls\">\n            <div className=\"controls__load\">\n                <span className=\"controls__load-local\">\n                    <input \n                        type=\"button\"\n                        onClick={handleLoadLocal}\n                        value=\"Load from Local\"\n                        className=\"btn btn-ghost\"\n                    />\n                    <input \n                        type=\"file\" \n                        multiple={true}\n                        ref={inputFile}\n                        style={{display:\"none\"}}\n                        onChange={loadAndParseLocalModels}\n                        value=\"\"\n                    />\n                </span>\n                <span className=\"controls__load-url\">\n                    <input \n                        type=\"text\" \n                        ref={inputURL}\n                        className=\"input\"\n                        placeholder=\"Enter URL here\"\n                    />\n                    <input \n                        type=\"button\" \n                        onClick={handleLoadURL}\n                        value=\"Load from URL\" \n                        className=\"btn btn-ghost\"\n                    />\n                </span>\n            </div>\n            {/* <input\n                type=\"button\"\n                className=\"controls__compare\"\n                onClick={handleCompare}\n                value=\"Compare\"\n            /> */}\n        </div>\n    );\n}\n\nexport default Controls;\n","import './Results.css';\n\nfunction Results({results}) {\n    return (\n        <div className=\"results\">\n            <h1>Results</h1>\n        </div>\n    );\n}\n\nexport default Results;\n","import './App.css';\nimport React, {useReducer} from 'react';\nimport Controls from '../Controls/Controls';\nimport Models from '../Models/Models';\nimport Results from '../Results/Results';\n\nexport const AppContext = React.createContext({\n    modelsJSON: [],\n    results: {},\n    canonical: null,\n});\n\nconst makeId = () => `id-${Math.random().toString(16).slice(2)}`;\n\nfunction App() {\n    const [state, setState] = useReducer((oldState, newState) => {\n        let updatedState = {...oldState, ...newState};\n        const {action} = newState;\n        if (action && action.type) {\n            // if needed, we can use this\n            if (action.type === 'addJSON') {\n                updatedState = {\n                    ...updatedState,\n                    modelsJSON: [\n                        ...updatedState.modelsJSON,\n                        {\n                            ...action.json,\n                            ...(!action.json.id && {id: makeId()})\n                        }\n                    ]\n                }\n            } else if (action.type === 'removeModel') {\n                updatedState = {\n                    ...updatedState,\n                    modelsJSON: updatedState.modelsJSON.filter((model) => model.id !== action.id)\n                };\n            } \n        }\n        return updatedState;\n    }, {\n        modelsJSON: [],\n        results: {},\n        canonical: null,\n        mode: 'load',\n    });\n    console.log('state:', state);\n    const {modelsJSON, mode, results} = state;\n    return (\n        <AppContext.Provider value={{state, setState, dispatch: setState}}>\n            <div className=\"MMCompare\">\n            <header className=\"header\">\n                <div className=\"header__primary\">\n                    <div className={\"logo\"}>\n                        <span>{'MentalModeler'}</span>\n                        <span>{'COMPARE'}</span>\n                    </div>\n                    <div className=\"header__mode-select\">\n                        <div className=\"header__mode-select-mode\">\n                            <span>{'Files'}</span>\n                        </div>\n                        <div className=\"header__mode-select-mode\">\n                            <span>{'Compare'}</span>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"header__secondary\">\n                    {mode === 'load' && (<Controls />)}\n                    {mode === 'compare' && (null)}\n                </div>\n            </header>\n                {mode === 'result' && (\n                    <Results results={results} />\n                )}\n            </div>\n        </AppContext.Provider>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}