{"version":3,"sources":["../../mm-modules/src/loader.js","../../mm-modules/src/parser.js","../../mm-modules/index.js","utils.js","components/Controls/Controls.js","components/Models/Models.js","components/Overlay/Overlay.js","components/Result/Result.js","components/Scenario/Scenario.js","appReducer.js","../../mm-modules/src/compare.js","components/App/App.js","index.js"],"names":["loadFile","file","reader","FileReader","Promise","resolve","reject","onerror","abort","DOMException","onload","result","readAsText","NESTED_LISTS","parseMMP","mmp","indexOf","parseXML","JSON","parse","e","console","error","alert","xmlString","excludeArray","json","parser","DOMParser","xmlDoc","parseFromString","childNodes","firstChild","forEach","node","localName","info","getJSONFromNode","groupNames","concepts","getJSONFromArray","getChildNodes","scenarios","xmlNode","omitLocalNameProperty","nodeType","idx","getAttribute","textContent","xmlArray","a","push","xml","nodes","loadAndParse","getMargin","top","bottom","marginTop","marginBottom","getDataId","target","dataset","id","getConcept","concept","find","initScenario","map","name","selected","influence","expectedChange","preferredState","points","Controls","inputFile","useRef","useContext","AppContext","state","setState","dispatch","className","process","type","onClick","current","click","value","multiple","ref","style","display","onChange","evt","fileList","files","length","Array","from","f","action","mode","disabled","canonicalId","modelsJSON","Models","results","i","author","date","Intl","DateTimeFormat","year","month","day","hour","minute","format","Date","score","viewResultId","classnames","Overlay","children","Concept","Linkage","fromNode","toNode","relationship","sign","focusable","data-id","width","height","viewBox","xmlns","fill","stroke","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","d","getPointsTitle","title","collection","affect","Result","model","relationships","extraNodes","extra","missingNodes","missing","presentNodes","present","extraRelationships","missingRelationships","incorrectlySignedRelationships","incorrectlySigned","correctlySignedRelationships","correctlySigned","relationshipCollections","nodeCollections","data","key","Scenario","scenario","dispatchChange","changeSelected","checked","changeAdjustment","changeExpectedChange","index","changeExpected","parseInt","hasInfluence","useDisableTextStyle","placeholder","appReducer","oldState","newState","updatedState","Math","random","toString","slice","filter","canonical","modelsToCompare","cRelationships","normalize","toLowerCase","trim","getNode","findNode","_node","getRelationships","fromName","fromId","fromNodeId","differenceNodes","b","names","includes","differenceRelationships","canonicalNodes","modelNodes","canonicalRelationships","flatMap","modelRelationships","intersectionNodes","correctlyLinkedRelationships","intersectionRelationships","x","y","cFromNode","cRelationship","compare","compareModels","updatedConcept","hasOwnProperty","canonicalModel","React","createContext","App","useReducer","showInternalTools","useEffect","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8a6efe64.chunk.js","sourcesContent":["const loadFile = (file) => {\n    const reader = new FileReader();\n\n    return new Promise((resolve, reject) => {\n        reader.onerror = () => {\n            reader.abort();\n            reject(new DOMException('MMP file loading failed!'));\n        };\n\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n\n        reader.readAsText(file);\n    });\n};\n\nconst loadURL = (url) => {\n    const req = new XMLHttpRequest();\n\n    req.open('GET', url, true);\n    req.responseType = 'text';\n    \n    return new Promise((resolve, reject) => {\n        req.onerror = () => {\n            req.abort();\n            reject(new  DOMException('MMP url loading failed!'));\n        };\n\n        req.onload = () => {\n            resolve(req.result);\n        };\n\n        req.send();\n    });\n};\n\nexport {loadFile, loadURL};\n","const NESTED_LISTS = ['relationships', 'concepts', 'properties'];\n\nconst parseMMP = (mmp) => {\n    try {\n        if (mmp.indexOf('<?xml') > -1) {\n            return parseXML(mmp);\n        }\n        else {\n            return JSON.parse(mmp);\n        }\n    }\n    catch (e) {\n        console.error(e);\n        alert('Parsing of mmp failed!');\n    }\n};\n\nconst parseXML = (xmlString, excludeArray = []) => {\n    let json = {};\n    let parser = new DOMParser();\n    let xmlDoc = parser.parseFromString(xmlString, 'application/xml');\n    let childNodes = xmlDoc.firstChild.childNodes;\n\n    childNodes.forEach((node) => {\n        switch(node.localName) {\n            case 'info':\n                if (excludeArray.indexOf('info') === -1) {\n                    json.info = getJSONFromNode(node);\n                }\n            break;\n            case 'groupNames':\n                if (excludeArray.indexOf('group') === -1) {\n                    json.groupNames = getJSONFromNode(node, true);\n                }\n            break;\n            case 'concepts':\n                if (excludeArray.indexOf('concepts') === -1) {\n                    json.concepts = getJSONFromArray(getChildNodes(node));\n                }\n            break;\n            case 'scenarios':\n                if (excludeArray.indexOf('scenario') === -1) {\n                    json.scenarios = getJSONFromArray(getChildNodes(node));\n                }\n            break;\n        }\n    });\n\n    return json;\n};\n\nconst getJSONFromNode = (xmlNode, omitLocalNameProperty) => {\n    let json = {};\n\n    xmlNode.childNodes.forEach((node) => {\n        if (node.nodeType === 1) {\n            if (node.localName === 'groupName') {\n                let idx = node.getAttribute('index');\n                json[idx] = node.textContent;\n            }\n            \n            if (NESTED_LISTS.indexOf(node.localName) > -1) {\n                json[node.localName] = getJSONFromArray(getChildNodes(node));\n            }\n            else if (!omitLocalNameProperty) {\n                json[node.localName] = node.textContent;\n            }\n        }\n    });\n    return json;\n};\n\nconst getJSONFromArray = (xmlArray) => {\n    let a = [];\n\n    xmlArray.forEach((node) => {\n        a.push(getJSONFromNode(node));\n    });\n\n    return a;\n}\n\nconst getChildNodes = (xml) => {\n    let nodes = [];\n\n    xml.childNodes.forEach((node) => {\n        if(node.nodeType === 1) {\n            nodes.push(node);\n        }\n    });\n\n    return nodes;\n}\n\nexport {parseMMP};\n","import {compareModels} from './src/compare';\nimport {loadFile, loadURL} from './src/loader';\nimport {parseMMP} from './src/parser';\n\nasync function loadAndParse(file) {\n    return parseMMP(await loadFile(file));\n}\n\nasync function loadAndParseURL(url) {\n    return parseMMP(await loadURL(url));\n}\n\nconst makeId = () => `id-${Math.random().toString(16).slice(2)}`;\n\nexport {\n    compareModels,\n    loadFile, \n    loadURL, \n    loadAndParse, \n    loadAndParseURL, \n    makeId, \n    parseMMP\n};\n","export const isDevEnv = () => process.env.NODE_ENV === 'development';\nexport const getKeys = (o) => typeof o === 'object' ? Object.keys(o) : [];\nexport const getLength = (o) => getKeys(o).length;\nexport const updateClipboard = (newClip) => {navigator.clipboard.writeText(newClip).then(function() {/* success */}, function() {/* error */});}\nexport const getMargin = (top, bottom) => ({\n    ...(typeof top === 'number' && {marginTop: `${top}px`}),\n    ...(typeof bottom === 'number' && {marginBottom: `${bottom}px`})\n});\nexport const getDataId = (e) => e.target.dataset.id;\nexport const getConcept = (id, concepts) => {\n    const concept = concepts.find((concept) => id === concept.id) || {};\n    return {...concept};\n};\nexport const initScenario = ({concepts = [], scenarios = []}) => {\n    return {\n        concepts: concepts.map(({name, id, preferredState}) => (\n            {\n                name,\n                id,\n                selected: true,\n                influence: 0,\n                expectedChange: 0,\n                preferredState,\n                // influence: '1',\n                // expectedChange: 'decrease',\n                points: 0,\n            }\n        )),\n    };\n}\n","import {useContext, useRef} from 'react';\nimport {loadAndParse, loadAndParseURL} from 'mm-modules';\nimport {isDevEnv, updateClipboard} from '../../utils';\nimport {AppContext} from '../App/App';\nimport './Controls.css';\n\nfunction Controls() {\n    const inputFile = useRef(null);\n    const inputURL = useRef('');\n    const {state, setState, dispatch} = useContext(AppContext);\n    const handleLoadLocal = () => inputFile.current.click();\n\n    const handleLoadURL = async () => {\n        const json = await loadAndParseURL(inputURL.current.value);\n        dispatch({\n            action: {\n                type: 'addJSON',\n                json\n            }\n        });\n    };\n\n    const loadAndParseLocalModels = evt => {\n        const fileList = evt.target.files;\n        return fileList && fileList.length > 0 && Array.from(fileList).forEach(async f => {\n            const json = await loadAndParse(f);\n            dispatch({action: {type: 'addJSON', json}});\n        });\n    };\n\n    return (\n        <div className=\"controls\">\n            {isDevEnv() && (\n                <input\n                    style={{alignSelf: 'center'}}\n                    type=\"button\"\n                    onClick={() => updateClipboard(JSON.stringify(state, null, 4))}\n                    value=\"Copy state JSON\"\n                    className=\"btn btn-ghost\"\n                />\n            )}\n            <div className=\"controls__load-local\">\n                <input \n                    type=\"button\"\n                    onClick={handleLoadLocal}\n                    value=\"Load\"\n                    className=\"btn btn-ghost\"\n                />\n                <input \n                    type=\"file\" \n                    multiple={true}\n                    ref={inputFile}\n                    style={{display:\"none\"}}\n                    onChange={loadAndParseLocalModels}\n                    value=\"\"\n                />\n            </div>\n            <input\n                type=\"button\"\n                onClick={() => setState({mode: 'scenario'})}\n                value=\"Configure scenario\"\n                className=\"btn btn-ghost\"\n                disabled={!state.canonicalId}\n            />\n            <input\n                type=\"button\"\n                onClick={() => setState({action: {type: 'compare'}})}\n                value=\"Compare\"\n                className=\"btn btn-ghost\"\n                disabled={!state.canonicalId || state.modelsJSON.length < 2}\n            />\n            {/* <div className=\"controls__load-url\">\n                <input \n                    type=\"text\" \n                    ref={inputURL}\n                    className=\"input\"\n                    placeholder=\"Enter URL here\"\n                    disabled\n                />\n                <input \n                    type=\"button\" \n                    onClick={handleLoadURL}\n                    value=\"Load from URL\" \n                    className=\"btn btn-ghost\"\n                    disabled\n                />\n            </div> */}\n        </div>\n    );\n}\n\nexport default Controls;\n","import {useContext} from 'react';\nimport classnames from 'classnames';\n\nimport {AppContext} from '../App/App';\n\nimport './Models.css';\n\nfunction Models() {\n    const {state, setState, dispatch} = useContext(AppContext);\n    const {modelsJSON, canonicalId, results = {}} = state;\n    return (\n        <div className=\"models\">\n            {modelsJSON.map((json, i) => {\n                const {info, id} = json || {info: {}};\n                const {author, date, name} = info;\n                const result = results[id];\n                return (\n                    <div className=\"model-wrapper\" key={`model-${i}`}>\n                        <div className=\"model\">\n                            <div className=\"model__info\">\n                                <div className=\"model__author\">\n                                    {author || '[Author]'}\n                                </div>\n                                <div className=\"model__name\">\n                                    {name || '[Name]'}\n                                </div>\n                                <div className=\"model__date\">\n                                    {date ? new Intl.DateTimeFormat('en-US', {year: 'numeric', month: 'short', day: 'numeric', hour: 'numeric', minute: 'numeric' }).format(new Date(date)) : '[Date]'}\n                                </div>\n                            </div>\n                            {result && (\n                                <div className=\"model__score\">\n                                    <div className=\"model__score-value\">\n                                        {`Score: ${result.score}`}\n                                    </div>\n                                    <div className=\"model__score-result\">\n                                        <button\n                                            className=\"link-btn\"\n                                            onClick={() => setState({\n                                                mode: 'result',\n                                                viewResultId: id\n                                            })}\n                                        >\n                                            {'View result'}\n                                        </button>\n                                    </div>\n                                </div>\n                            )}\n                            <div className=\"model__controls\">\n                                <button\n                                    className={classnames('canonical-btn', {\n                                        'canonical-btn--selected': id === canonicalId\n                                    })}\n                                    onClick={() => setState({canonicalId: id})}\n                                >\n                                    <span>{'Reference'}</span>\n                                </button>\n                                <button\n                                    className=\"link-btn\"\n                                    onClick={() => dispatch({\n                                        action: {\n                                            type: 'removeModel',\n                                            id: id\n                                        }\n                                    })}\n                                >\n                                    {'Remove'}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                );\n            })}\n        </div>\n    );\n}\n\nexport default Models;\n","import {Fragment, useContext} from 'react';\nimport {AppContext} from '../App/App';\nimport {getMargin} from '../../utils';\n\nimport './Overlay.css';\n\nfunction Overlay({children, className = ''}) {\n    const {state, setState} = useContext(AppContext);\n    \n    return (\n        <div className={`Overlay ${className}`}>\n            <button className=\"Overlay__close btn btn-ghost\" onClick={() => setState({mode: 'files'})}>\n                <span>{'Close'}</span>\n            </button>\n            <div className=\"Overlay__bg\"/>\n            <div className=\"Overlay__body\">\n                <div className=\"Overlay__content\">{children}</div>\n            </div>\n        </div>\n    );\n}\n\nexport default Overlay;\n","import {Fragment, useContext} from 'react';\nimport {AppContext} from '../App/App';\nimport {getMargin} from '../../utils';\nimport Overlay from '../Overlay/Overlay';\nimport './Result.css';\n\nconst Concept = ({name}) => <div className=\"result__concept\">{name}</div>\nconst Linkage = ({fromNode, toNode, relationship}) => {\n    let sign = 'affects'\n    if (relationship.influence !== '0') {\n        sign = relationship.influence > 0\n            ? 'increases'\n            : 'decreases';\n    }\n    return <div className=\"result__linkage\">\n        {fromNode.name || '[Missing fromNode]'}\n        <div className=\"result__linkage-sign\">\n            <svg focusable=\"false\" data-id=\"SVG_ARROW_RIGHT__24\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" stroke=\"#fff\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"4\" y1=\"12\" x2=\"20\" y2=\"12\" stroke=\"#fff\"/></g></svg>\n            <span>{sign}</span>\n            <svg focusable=\"false\" data-id=\"SVG_ARROW_RIGHT__24\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" stroke=\"#fff\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M15.7 7l5 5-5 5M20.8 12H3.2\"></path></g></svg>\n        </div>\n        {toNode.name || '[Missing toNode]'}\n    </div>\n};\n\nconst getPointsTitle = (title, collection, affect) => \n    collection.length > 0\n        ? <Fragment><span>{title}</span><span className=\"results__points-line-item\">{`${affect}${collection.length} point${collection.length > 1 ? 's' : ''}`}</span></Fragment>\n        : title;\n\nfunction Result() {\n    const {state, setState} = useContext(AppContext);\n    const {results, modelsJSON, viewResultId} = state;\n    const model = modelsJSON.find((model) => model.id === viewResultId);\n    const result = results[viewResultId];\n    const {score, nodes, relationships} = result;\n    const {extra: extraNodes, missing: missingNodes, present: presentNodes} = nodes;\n    const {extra: extraRelationships, missing: missingRelationships, incorrectlySigned: incorrectlySignedRelationships, correctlySigned: correctlySignedRelationships} = relationships;\n    const {info,} = model || {info: {}};\n    const {author, date, name} = info;\n    const relationshipCollections = [\n        {title: getPointsTitle(`Missing (${missingRelationships.length})`, missingRelationships, '-'), collection: missingRelationships},\n        {title: getPointsTitle(`Extra (${extraRelationships.length})`, extraRelationships, '-'), collection: extraRelationships},\n        {title: `Incorrectly signed (${incorrectlySignedRelationships.length})`, collection: incorrectlySignedRelationships},\n        {title: getPointsTitle(`Correctly signed (${correctlySignedRelationships.length})`, correctlySignedRelationships, '+'), collection: correctlySignedRelationships},\n    ];\n    const nodeCollections = [\n        {title: `Missing (${missingNodes.length})`, collection: missingNodes},\n        {title: `Extra (${extraNodes.length})`, collection: extraNodes},\n        {title: `Present (${presentNodes.length})`, collection: presentNodes},\n    ];\n    \n    return (\n        <Overlay>    \n            <div style={getMargin(null, 12)} className=\"result__author weight-300 h3 capitalize\">{author || '[Author]'}</div>\n            <div className=\"result__name weight-500 capitalize\">{name || '[Name]'}</div>\n            <div style={getMargin(null, 12)} className=\"result__date italic\">{date ? new Intl.DateTimeFormat('en-US', {year: 'numeric', month: 'short', day: 'numeric', hour: 'numeric', minute: 'numeric' }).format(new Date(date)) : '[Date]'}</div>\n            <div style={getMargin(null, 32)} className=\"font-blue h2 italic weight-300\">{`SCORE: ${score}`}</div>\n            <div className=\"result__category uppercase weight-600 font-blue h3\">{'LINKAGES'}</div>\n            {relationshipCollections.map(({title, collection}, i) => (\n                <Fragment key={`collection-${i}`}>\n                    <div className=\"result__group-title weight-300\">{title}</div>\n                    <div className=\"result__linkages\">\n                        {collection.map((data, i) => <Linkage {...data} key={`linkage-${i}`}/>)}\n                    </div>\n                </Fragment>\n            ))}\n            <div className=\"result__category uppercase weight-600 font-blue h3\">{'Concepts'}</div>\n            {nodeCollections.map(({title, collection}, i) => (\n                <Fragment key={`collection-${i}`}>\n                    <div className=\"result__group-title weight-300\">{title}</div>\n                    <div className=\"result__concepts\">\n                        {collection.map(({name, id}, i) => <Concept name={name} key={`linkage-${i}`}/>)}\n                    </div>\n                </Fragment>\n            ))}\n        </Overlay>\n    );\n}\n\nexport default Result;\n","import {Fragment, useContext} from 'react';\nimport {AppContext} from '../App/App';\nimport {getMargin, getDataId, getConcept} from '../../utils';\nimport Overlay from '../Overlay/Overlay';\nimport './Scenario.css';\n\nfunction Scenario() {\n    const {state, dispatch} = useContext(AppContext);\n    const {scenario} = state\n    const {concepts} = scenario || {concepts: []};\n    const dispatchChange = (id, concept) => dispatch({\n        action: {\n            type: 'updateScenario',\n            id,\n            concept,\n        },\n    });\n    const changeSelected = (e) => {\n        const id = getDataId(e);\n        dispatchChange(\n            id,\n            {\n                ...getConcept(id, concepts),\n                selected: e.target.checked\n            },\n        );\n    }\n    const changeAdjustment = (e) => {\n        const id = getDataId(e);\n        dispatchChange(\n            id,\n            {\n                ...getConcept(id, concepts),\n                influence: e.target.value\n            },\n        );\n    }\n    const changeExpectedChange = (e) => {\n        const id = getDataId(e);\n        dispatchChange(\n            id,\n            {\n                ...getConcept(id, concepts),\n                expectedChange: e.target.value\n            },\n        );\n    }\n    const changePoints = (e) => {\n        \n    }\n    const pointsKeyDown = (e) => {\n        \n    }\n    return (\n        <Overlay>    \n            <div className=\"Scenario__title h2 weight-300\">{'Scenario'}</div>\n            <div className=\"Scenario__rows\">\n                <div className=\"Scenario__row Scenario__row--header\">\n                    <div className=\"Scenario__col Scenario__col--include\"></div>\n                    <div className=\"Scenario__col Scenario__col--component\">{'Concept'}</div>\n                    <div className=\"Scenario__col Scenario__col--adjust\">{'+ / –'}</div>\n                    <div className=\"Scenario__col Scenario__col--expected-change\">{'Expected change'}</div>\n                    <div className=\"Scenario__col Scenario__col--points\">{'Points'}</div>\n                </div>\n                {scenario.concepts.map(({name, id, selected, influence, expectedChange, points}, index) => {\n                    {/* name = index % 2 === 0\n                        ? `${name} ${name} ${name} ${name} ${name} ${name}`\n                        : name; */}\n                    const changeExpected = parseInt(expectedChange, 10) !== 0;\n                    const hasInfluence = parseInt(influence, 10) !== 0;\n                    const useDisableTextStyle = hasInfluence || !selected;\n                    return (\n                        <div\n                            className={`Scenario__row${useDisableTextStyle ? ' Scenario__row--disabled-text' : ''}`}\n                            key={`scenario-row-${index}`}\n                        >\n                            <div className=\"Scenario__col Scenario__col--include no-padding\">\n                                {!hasInfluence && (\n                                    <label className=\"Scenario__include-label\">\n                                        <input\n                                            type=\"checkbox\"\n                                            id={`scenario-selected-${id}`}\n                                            data-id={id}\n                                            checked={selected}\n                                            onChange={changeSelected}\n                                        />\n                                    </label>\n                                )}\n                            </div>\n                            <div className=\"Scenario__col Scenario__col--component\">{name}</div>\n                            <div className=\"Scenario__col Scenario__col--adjust no-padding\">\n                                {selected && !changeExpected && (\n                                    <select\n                                        value={influence}\n                                        className=\"Scenario__select\"\n                                        id={`scenario-adjust-${id}`}\n                                        data-id={id}\n                                        onChange={changeAdjustment}\n                                    >\n                                        <option value=\"1\">{'+'}</option>\n                                        <option value=\"0\">{''}</option>\n                                        <option value=\"-1\">{'–'}</option>\n                                    </select>\n                                )}\n                            </div>\n                            <div className=\"Scenario__col Scenario__col--expected-change no-padding\">\n                                {selected && !hasInfluence && (\n                                    <select\n                                        value={expectedChange}\n                                        className=\"Scenario__select\"\n                                        id={`scenario-expect-change-${id}`}\n                                        data-id={id}\n                                        onChange={changeExpectedChange}\n                                    >\n                                        <option value=\"1\">{'Increase'}</option>\n                                        <option value=\"0\">{''}</option>\n                                        <option value=\"-1\">{'Decrease'}</option>\n                                    </select>\n                                )}\n                            </div>\n                            <div className=\"Scenario__col Scenario__col--points\">\n                                {selected && !hasInfluence && (\n                                    <input \n                                        type=\"text\" \n                                        className=\"Scenario__input-points input\"\n                                        placeholder={changeExpected ? 'Enter points' : ''}\n                                        id={`scenario-points-${id}`}\n                                        data-id={id}\n                                        value={changeExpected ? points : ''}\n                                        disabled={!changeExpected}\n                                    />\n                                )}\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n        </Overlay>\n    );\n}\n\nexport default Scenario;\n","import {initScenario} from './utils';\nimport {makeId, compareModels} from 'mm-modules';\n\nconst appReducer = (oldState, newState) => {\n    const {action} = newState;\n    let updatedState = {...oldState, ...newState};\n    delete updatedState.action;\n    \n    if (action && action.type) {\n        if (action.type === 'addJSON') {\n            updatedState = {\n                ...updatedState,\n                modelsJSON: [\n                    ...updatedState.modelsJSON,\n                    {\n                        ...action.json,\n                        ...(!action.json.id && {id: makeId()})\n                    }\n                ]\n            }\n        } else if (action.type === 'removeModel') {\n            updatedState = {\n                ...updatedState,\n                modelsJSON: updatedState.modelsJSON.filter((model) => model.id !== action.id),\n                ...(updatedState.canonicalId === action.id && {canonicalId: null})\n            };\n        } else if (action.type === 'compare') {\n            const results = compareModels({\n                modelsJSON: updatedState.modelsJSON,\n                canonicalId: updatedState.canonicalId\n            });\n            updatedState = {\n                ...updatedState,\n                results,\n            };    \n        } else if (action.type === 'updateScenario') {\n            const {id, concept: updatedConcept} = action;\n            updatedState = {\n                ...updatedState,\n                scenario: {\n                    ...updatedState.scenario.map,\n                    concepts: updatedState.scenario.concepts.map((concept) => (\n                        id === concept.id ? updatedConcept : concept\n                    )),\n                }\n            };\n        }\n    }\n    // if we are setting the canonicalId, set up the scenario data\n    if (newState.hasOwnProperty('canonicalId') && updatedState.canonicalId !== oldState.canonicalId) {\n        const canonicalModel = updatedState.modelsJSON.find((model) => model.id === updatedState.canonicalId);\n        updatedState = {\n            ...updatedState,\n            scenario: initScenario(canonicalModel || {concepts: []}),\n        };\n    }\n\n    return updatedState;\n};\n\nexport default appReducer\n","const compare = (model, canonical) => {\n    const normalize = name => name.toLowerCase().trim(); \n    const getNode = ({name, id}) => ({name: name, id: id});\n    const findNode = ({id, nodes}) => {\n        const _node = nodes.find(node => node.id === id) || {id: '', name: '[not found]'};\n        return getNode(_node);\n    }\n\n    const getRelationships = ({name: fromName, id: fromId, relationships}, index, nodes) => (\n        relationships && relationships.map(({name, id, influence}) => ({\n            fromNode: {\n                id: fromId,\n                name: fromName\n            },\n            toNode: findNode({id, nodes}),\n            relationship: {\n                id: id,\n                name: name,\n                influence: influence,\n                fromNodeId: fromId\n            }\n        }))\n    );\n    \n    const differenceNodes = (a, b) => {\n        const names = b.map(({name}) => normalize(name));\n        return a.filter(({name}) => !names.includes(normalize(name)));\n    };\n\n    const intersectionNodes = (a, b) => {\n        const names = b.map(({name}) => normalize(name));\n        return a.filter(({name}) => names.includes(normalize(name)));\n    };\n\n    const differenceRelationships = (a, b) => {\n        const names = b.map(({fromNode, toNode}) => normalize(fromNode.name + toNode.name));\n        return a.filter(({fromNode, toNode}) => !names.includes(normalize(fromNode.name + toNode.name)));\n    };\n\n    const intersectionRelationships = (a, b) => {\n        const names = b.map(({fromNode, toNode}) => normalize(fromNode.name + toNode.name));\n        return a.filter(({fromNode, toNode}) => names.includes(normalize(fromNode.name + toNode.name)));\n    };\n\n    const correctlySigned = (relationships, cRelationships) => {\n        const isCorrect = (x, y) => (x > 0 && y > 0) || (x < 0 && y < 0) || (x === 0 && y === 0);\n\n        return relationships.filter(({fromNode, relationship}) => {\n            const name = normalize(fromNode.name + relationship.name);\n            return cRelationships.find(({fromNode: cFromNode, relationship: cRelationship}) => {\n                return name === normalize(cFromNode.name + relationship.name) && isCorrect(relationship.influence, cRelationship.influence);\n            });\n        });\n    };\n\n    const canonicalNodes = canonical.concepts.map(getNode);\n    const modelNodes = model.concepts.map(getNode);\n    const canonicalRelationships = canonical.concepts.flatMap(getRelationships);\n    const modelRelationships = model.concepts.flatMap(getRelationships);\n    const extraNodes = differenceNodes(modelNodes, canonicalNodes);\n    const missingNodes = differenceNodes(canonicalNodes, modelNodes);\n    const presentNodes = intersectionNodes(modelNodes, canonicalNodes);\n    const extraRelationships = differenceRelationships(modelRelationships, canonicalRelationships);\n    const missingRelationships = differenceRelationships(canonicalRelationships, modelRelationships);\n    const correctlyLinkedRelationships = intersectionRelationships(modelRelationships, canonicalRelationships);\n    const correctlySignedRelationships = correctlySigned(correctlyLinkedRelationships, canonicalRelationships);\n    const incorrectlySignedRelationships = differenceRelationships(correctlyLinkedRelationships, correctlySignedRelationships);\n    const score = correctlySignedRelationships.length - (extraRelationships.length + missingRelationships.length);\n\n    return {\n        id: model.id,\n        score: score,\n        nodes: {\n            extra: extraNodes,\n            missing: missingNodes,\n            present: presentNodes,\n        },\n        relationships: {\n            extra: extraRelationships,\n            missing: missingRelationships,\n            correctlySigned: correctlySignedRelationships,\n            incorrectlySigned: incorrectlySignedRelationships,\n        },\n    };\n};\n\nconst compareModels = ({modelsJSON, canonicalId}) => {\n    const canonical = modelsJSON.find(model => model.id === canonicalId);\n    const modelsToCompare = modelsJSON.filter(model => model.id !== canonicalId);\n    const results = {};\n\n    modelsToCompare.forEach(model => {\n        results[model.id] = compare(model, canonical);\n    });\n\n    return results;\n};\n\nexport {compareModels};\n","import React, {useEffect, useReducer} from 'react';\nimport classnames from 'classnames';\n\nimport Controls from '../Controls/Controls';\nimport Models from '../Models/Models';\nimport Result from '../Result/Result';\nimport Scenario from '../Scenario/Scenario';\nimport appReducer from '../../appReducer';\n// import json from '../../json/andrew_state.json';\n// import json from '../../json/steven_state.json';\n// import json from '../../json/steven_state_results.json';\nimport json from '../../json/fish_wetland_state.json';\nimport {getKeys, isDevEnv} from '../../utils';\n\nimport './App.css';\n\nconst loadState = json;\n\n\nexport const AppContext = React.createContext({\n    modelsJSON: [],\n    results: {},\n    canonical: null,\n    mode: 'scenario',\n});\n\nfunction App() {\n    const [state, setState] = useReducer(appReducer, {\n        modelsJSON: [],\n        results: {},\n        canonicalId: null,\n        viewResultId: null,\n        mode: 'files',\n    });\n    const {mode, results, modelsJSON, showInternalTools} = state;\n\n    // load state if indicated\n    useEffect(() => {\n        if (isDevEnv() && loadState) {\n            const resultsKeys = getKeys(loadState.results);\n            setState({\n                ...loadState,\n                ...(resultsKeys.length > 0 && {viewResultId: resultsKeys[0], mode: 'result'}),\n                ...(resultsKeys.length < 1 && {mode: 'scenario'})\n            });\n        }\n    }, []);\n\n    return (\n        <AppContext.Provider value={{state, setState, dispatch: setState}}>\n            <div className=\"MMCompare\">\n                <header className=\"header\">\n                    <div className=\"header__primary\">\n                        <div className={\"logo\"}>\n                            <div className=\"logo-inner\">\n                                <span>{'MentalModeler'}</span><span>{'COMPARE'}</span>\n                            </div>\n                        </div>\n                        <Controls />\n                    </div>\n                </header>\n                <main className=\"main\">\n                    <Models />\n                    {mode === 'result' && (<Result />)}\n                    {mode === 'scenario' && (<Scenario />)}\n                </main>\n            </div>\n        </AppContext.Provider>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}